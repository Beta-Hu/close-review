<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Conferences</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="main">
    <div class="head ui-sortable-helper">
        <div class="divlogo">
            <img src="img/logo.png" class="logo">
        </div>
        <div class="divbutton">
            <a class="profile">Profile<br></a>
            <a class="sign" id="sign"></a>
        </div>
    </div>
    <div class="bigholder">
    </div>
    <div class="smallholder">
    </div>
    <div class="horizonalbox">
        <span class="bigfont" id="title"></span>
    </div>
    <div>
        <ul>
            <li class="unsortedlist">
                <div class="smallholder"></div>
                <div class="horizonalbox">
                    <span class="accept-author" id="authors"></span>
                    <a class="smallhref">PDF</a>
                    <a class="smallhref">SupportMaterial</a>
                    <a class="smallhref">Rebuttal</a>
                </div>
                <div class="smallholder"></div>
                <span class="accept-abstract" id="abstracts"></span>
            </li>
        </ul>
    </div>
    <div class="bigholder"></div>
    <div>
        <ul class="list" id="reviewer">
        </ul>
    </div>
</div>
</body>

<p style="background: none; height: 5%; position: fixed; bottom: 0; width: 100%; text-align: center;">
    <img style="padding-top:2px; height: 10px; width: auto" src="/img/emblem.png" alt="">
    <a class="icp" style="color:#000; font-size: 8px" href="https://beian.miit.gov.cn/" target="_blank">鄂ICP备2023008384号</a>
</p>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/user-status.js"></script>
<script type="text/javascript">
    window.onload = function () {
        var submissionId = window.location.href.split("=");
        submissionId = submissionId[submissionId.length - 1];
        $.ajax({
            type: "GET",
            url: "/submission/accepted/" + submissionId,
            dataType: 'json',
            async: true,
            data: {},
            success: function (data){
                var status = data["status"];
                var reviewerHead;
                var reviewerTail;

                document.getElementById("title").innerHTML = "# " + data["data"]["id"] + " " + data["data"]["title"];
                document.getElementById("abstracts").innerHTML = "Abstract: " + data["data"]["abstracts"];
                document.getElementById("authors").innerHTML = "Author: ";
                for (var i = 0; i < data["data"]["author"].length; i++)
                    document.getElementById("authors").innerHTML +=
                        data["data"]["author"][i]["username"] + "(" + data["data"]["author"][i]["email"] + "); ";

                if (status === 0) {
                    for (var i = 0; i < data["data"].length; i++){
                        reviewerHead = "<li>\n" +
                        "<span class=\"bigfont\"># Reviewer " + i + "</span>" +
                        "<ul class=\"list\">";

                        var commentsOfReviewer = ""
                        for (var j = 0; j < data["data"]["comments"]["initialComments"].length; j++){
                            commentsOfReviewer +=
                                "<li class=\"unsortedlist\">\n" +
                                "<span class=\"smallfont\">" +
                                data["data"]["comments"]["initialComments"][i] +
                                "</span>\n" +
                                "<span class=\"tinyfont\">" +
                                data["data"]["comments"]["rebuttal"][i] +
                                "</span>\n" +
                                "<div class=\"smallholder\"></div>\n" +
                                "</li>"
                                + data["data"]["comments"]["initialComments"][i];
                        }

                        reviewerTail = "</ul></li></ul>";

                        document.getElementById("reviewer").innerHTML +=
                            reviewerHead + commentsOfReviewer + reviewerTail;
                    }
                }
            },
            error: function (){
                alert("load paper detail failed");
            }
        });
    };
</script>

</html>
